(define (repl)
  (let loop ()
    (display "> " (current-output-port))
    (let ((input (read (current-input-port))))
      (unless (eof-object? input)
        (let ((result (eval input (interaction-environment))))
          (unless (eq? (void) result)
            (write result (current-output-port))
            (newline (current-output-port)))
          (loop))))))

(define (main args)
  (let ((files (cdr args)))
    (if (null? files)
        (repl)
        (for-each load files))))

(main (command-line))
